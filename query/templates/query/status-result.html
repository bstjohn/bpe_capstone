{% extends "user/base.html" %}

{% load staticfiles %}

{% block title %}System Status{% endblock %}

{% block header %}
{% block header-title %}
  <h1><p align= "center"><u><b>SYSTEM STATUS</b></u></p></h1>
{% endblock %}
{% endblock %}



{% block content %}
<!-- 
       Loop through System nodes
         Display:
           Node_ID
           USED_SPACE
           AVAILABLE_SPACE 
         Loop through CPU's
           Display:
             CPU_ID   as text
             CPU_Load as a bargraph
-->


<!-- Display Nodes -->
{% for node in sys_node %}
  <h2><p align = "center"><u> NODE ID: {{node.node_id}}</u></p></h2>

  <h3> Available Space: {{node.available}}%</h3>
  <div class="progress">
    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{{node.available}}" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em; width: {{node.available}}%;">
      Disk available: {{node.available}}%
    </div>
  </div>


 
 <h3> Used Space: {{node.used}}%</h3>
  <div class="progress">
    <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="{{node.used}}" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em; width: {{node.used}}%;">
      Disk unavailable: {{node.used}}%
    </div>
  </div>


  <h3> CPU List: </h3>

  <!-- Display CPUs  -->
  <ul>
  {% for i in node.systemcpu_set.all %}
      
      <h4> {{i.SystemNode.node_id}}</h4>
      <li><h5>CPU ID: {{i.cpu_id}}</h5></li>
      <ul>
      <li><h5>CPU Load: {{i.cpu_load}}%</h5></li>
<div class="progress">
  <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="{{i.cpu_load}}" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em; width: {{i.cpu_load}}%;">
    Load: {{i.cpu_load}}%
  </div>
</div>
      </li>
  </ul>
  {% endfor %}
  </ul>
   
{% endfor %}
{% endblock %}
